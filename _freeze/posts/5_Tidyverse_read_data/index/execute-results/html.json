{
  "hash": "d6ee94b1d54339ce671518b3f2b1f9ec",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Tidyverse: Read Data\"\nauthor: \"Jie Wu\"\ndraft: false\ndate: \"2025-05-09T19:45:00\"\nformat: \n    html:\n        toc: true\n        toc-depth: 2\n        code-fold: false\ncategories: [\"Tidyverse\", \"Data Science\", \"R Programming\"]\n---\n\n# Functions to read different kinds of data in Tidyverse\n\nBelow is a summary of Tidyverse packages and their functions for importing data (by ChatGPT). Use this as a quick reference, and consult the official documentation or search online for detailed usage and options. You don't need to memorize everything—just know where to look when needed.\n\n| **Package** | **Function** | **Purpose** | **File Type / Input** |\n|------------------|------------------|------------------|------------------|\n| **readr** | `read_csv()` | Read comma-separated values | `.csv` |\n|  | `read_tsv()` | Read tab-separated values | `.tsv` |\n|  | `read_delim()` | Read delimited text files | Custom delimiter |\n|  | `read_fwf()` | Read fixed-width text files | `.txt`, structured text |\n|  | `read_table()` | Read whitespace-separated files | `.txt`, space-separated |\n|  | `read_lines()` | Read lines as character vector | Raw text |\n|  | `read_file()` | Read entire file as one string | Raw text |\n|  | `read_rds()` / `write_rds()` | Read/write R serialized objects | `.rds` |\n|  | `type_convert()` | Guess and convert column types | Tibble/data frame |\n| **readxl** | `read_excel()` | Read Excel files | `.xls`, `.xlsx` |\n| **haven** | `read_spss()` | Import SPSS data | `.sav`, `.zsav` |\n|  | `read_stata()` | Import Stata data | `.dta` |\n|  | `read_sas()` | Import SAS data | `.sas7bdat` |\n| **xml2** | `read_xml()` | Parse XML | `.xml`, XML string/URL |\n|  | `read_html()` | Parse HTML | `.html`, HTML string/URL |\n|  | `xml_find_all()` | Find all nodes via XPath | XPath expression |\n|  | `xml_find_first()` | Find first matching node | XPath expression |\n|  | `xml_text()` | Extract text content | XML/HTML node |\n|  | `xml_attr()` / `xml_attrs()` | Extract attribute(s) | XML/HTML node |\n|  | `xml_children()` | Get child nodes | XML/HTML node |\n|  | `xml_structure()` | Display tree structure | XML/HTML document |\n| **httr** | `GET()` / `POST()` | Make HTTP requests | API endpoints, web URLs |\n|  | `content()` | Extract content from response | Parsed text, JSON, XML, raw |\n|  | `status_code()` | Check HTTP response code | HTTP response object |\n|  | `add_headers()` | Add custom headers to request | Authorization, content-type, etc. |\n|  | `authenticate()` | Add basic authentication credentials | Username/password |\n| **rvest** | `read_html()` | (Wraps `xml2::read_html()`) | Web page scraping |\n|  | `html_nodes()` | Select multiple HTML elements (CSS/XPath) | CSS or XPath selector |\n|  | `html_node()` | Select a single HTML element | CSS or XPath selector |\n|  | `html_text()` | Extract visible text | HTML node |\n|  | `html_attr()` | Extract attribute value | HTML tag attribute (e.g., `href`, `src`) |\n|  | `html_table()` | Extract HTML tables into tibbles | `<table>` elements |\n\n# Read DepMap Mutation Table\n\nBefore proceeding, ensure you have the `tidyverse` package installed by running `install.packages(\"tidyverse\")`.\n\nWe will work with the `OmicsSomaticMutations.csv` file from the 24Q4 DepMap release. The file can be downloaded from the following link: <https://plus.figshare.com/ndownloader/files/51065732>. While `readr` functions can read files directly from a URL, we will download the file locally since it will be used multiple times.\n\nFor the first attempt, we will use `read_csv()` with its default parameters.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load all packages\nrequire(readr)\nrequire(dplyr)\nrequire(here)\n\nurl <- \"https://plus.figshare.com/ndownloader/files/51065732\"\nfile_path <- here(\"_data/OmicsSomaticMutations.csv\")\ndownload.file(url, file_path )\n\ndepmap_mutation_data <- read_csv(file_path)\n```\n:::\n\n\nOf course, the code runs and loads all rows and columns, but did you notice those warning messages? Don't ignore them—they often provide valuable insights into potential issues with your data!\n\n![](images/paste-2.png)\n\nLet's run the suggested `problems()` command as suggested!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproblems(depmap_mutation_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 584 × 5\n     row   col expected           actual                                   file \n   <int> <int> <chr>              <chr>                                    <chr>\n 1 12396    60 1/0/T/F/TRUE/FALSE Reduced foot dorsiflexion strength in C… C:/U…\n 2 12396    61 1/0/T/F/TRUE/FALSE 30706531.0                               C:/U…\n 3 12428    60 1/0/T/F/TRUE/FALSE Pulse pressure                           C:/U…\n 4 12428    61 1/0/T/F/TRUE/FALSE 30224653.0                               C:/U…\n 5 16816    58 1/0/T/F/TRUE/FALSE dd227                                    C:/U…\n 6 16816    59 1/0/T/F/TRUE/FALSE CANDLE syndrome                          C:/U…\n 7 18217    60 1/0/T/F/TRUE/FALSE Response to anti-retroviral therapy (dd… C:/U…\n 8 18217    61 1/0/T/F/TRUE/FALSE 24554482.0                               C:/U…\n 9 18985    60 1/0/T/F/TRUE/FALSE Migraine                                 C:/U…\n10 18985    61 1/0/T/F/TRUE/FALSE 27322543.0                               C:/U…\n# ℹ 574 more rows\n```\n\n\n:::\n:::\n\n\nIf you examine the first problem as an example, you'll notice that the 60th column (`GwasDisease`) is empty until row 12,396. To investigate further, I ran the following command to extract all values in this column and display the unique values as a quick spot-check:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndepmap_mutation_data %>% pull(GwasDisease) %>% unique()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] NA\n```\n\n\n:::\n:::\n\n\nDid you notice? The entire column is filled with `NA` values, indicating that it was not properly loaded using the default `read_csv()` function. This highlights the importance of carefully reviewing your data after importing it. Always double-check for issues like this to ensure your analysis starts on the right foot.\n\nWhile `read_csv()` is generally a better option than `read.table()`—offering convenience by automatically handling quotes, separators, and headers—it is not foolproof. Even if your data is truly a CSV file, the importer may still encounter issues and fail to load your data correctly. This is a critical point to remember for any data scientist or bioinformatician: always validate your imported data to ensure accuracy and reliability.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndepmap_mutation_data <- read_csv(file_path, guess_max = Inf)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 718369 Columns: 70\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (44): Chrom, Ref, Alt, GT, VariantType, VariantInfo, DNAChange, ProteinC...\ndbl (20): Pos, AF, DP, RefCount, AltCount, PS, GcContent, LofNumberOfTranscr...\nlgl  (6): OncogeneHighImpact, TumorSuppressorHighImpact, LikelyLoF, HessDriv...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\n# Check for problems again\nproblems(depmap_mutation_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 0 × 5\n# ℹ 5 variables: row <int>, col <int>, expected <chr>, actual <chr>, file <chr>\n```\n\n\n:::\n\n```{.r .cell-code}\n# Verify the column values\ndepmap_mutation_data %>% pull(GwasDisease) %>% unique()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] NA                                                                                                                                                                          \n [2] \"Reduced foot dorsiflexion strength in Charcot-Marie-Tooth disease type 1A\"                                                                                                 \n [3] \"Pulse pressure\"                                                                                                                                                            \n [4] \"Response to anti-retroviral therapy (ddI/d4T) in HIV-1 infection (Grade 2 peripheral neuropathy)\"                                                                          \n [5] \"Migraine\"                                                                                                                                                                  \n [6] \"Heel bone mineral density\"                                                                                                                                                 \n [7] \"Type 2 diabetes\"                                                                                                                                                           \n [8] \"Chronic obstructive pulmonary disease\"                                                                                                                                     \n [9] \"Post bronchodilator FEV1\"                                                                                                                                                  \n[10] \"Intracranial aneurysm\"                                                                                                                                                     \n[11] \"Coronary artery disease (myocardial infarction, percutaneous transluminal coronary angioplasty, coronary artery bypass grafting, angina or chromic ischemic heart disease)\"\n[12] \"Highest math class taken (MTAG)\"                                                                                                                                           \n[13] \"Neuroticism\"                                                                                                                                                               \n[14] \"Height\"                                                                                                                                                                    \n[15] \"Red cell distribution width\"                                                                                                                                               \n[16] \"Vitiligo (non-segmental)\"                                                                                                                                                  \n[17] \"Exudative age-related macular degeneration\"                                                                                                                                \n[18] \"Creatinine levels\"                                                                                                                                                         \n[19] \"Mean arterial pressure\"                                                                                                                                                    \n[20] \"Asthma\"                                                                                                                                                                    \n[21] \"Endometriosis or endometrial cancer (pleiotropy)\"                                                                                                                          \n[22] \"Number of sexual partners\"                                                                                                                                                 \n[23] \"Chronic inflammatory diseases (ankylosing spondylitis, Crohn's disease, psoriasis, primary sclerosing cholangitis, ulcerative colitis) (pleiotropy)\"                       \n[24] \"Cholesterol, total\"                                                                                                                                                        \n[25] \"Blood protein levels\"                                                                                                                                                      \n[26] \"Fasting blood glucose adjusted for BMI\"                                                                                                                                    \n[27] \"Educational attainment (years of education)\"                                                                                                                               \n[28] \"Eczema\"                                                                                                                                                                    \n[29] \"Lack of premeditation\"                                                                                                                                                     \n[30] \"Common carotid intima-media thickness in HIV negative individuals\"                                                                                                         \n[31] \"Systemic sclerosis\"                                                                                                                                                        \n[32] \"Smooth-surface caries\"                                                                                                                                                     \n[33] \"Butyrylcholinesterase levels\"                                                                                                                                              \n[34] \"Idiopathic membranous nephropathy\"                                                                                                                                         \n[35] \"Lymphocyte percentage of white cells\"                                                                                                                                      \n[36] \"Gut microbiome composition (summer)\"                                                                                                                                       \n[37] \"Obesity-related traits\"                                                                                                                                                    \n[38] \"Self-reported math ability\"                                                                                                                                                \n[39] \"Proliferative diabetic retinopathy (vs NPDR and no DR)\"                                                                                                                    \n[40] \"Smoking initiation (ever regular vs never regular) (MTAG)\"                                                                                                                 \n[41] \"Body mass index\"                                                                                                                                                           \n[42] \"Chronic periodontitis (mean interproximal clinical attachment level)\"                                                                                                      \n[43] \"White blood cell count\"                                                                                                                                                    \n[44] \"Alanine aminotransferase levels in excessive alcohol consumption\"                                                                                                          \n[45] \"Time-dependent creatinine clearance change response to tenofovir treatment in HIV infection (time and treatment arm interaction)\"                                          \n[46] \"Type 1 diabetes\"                                                                                                                                                           \n[47] \"Response to anti-retroviral therapy (ddI/d4T) in HIV-1 infection (Grade 3 peripheral neuropathy)\"                                                                          \n[48] \"Heart rate\"                                                                                                                                                                \n[49] \"Schizophrenia\"                                                                                                                                                             \n[50] \"Narcolepsy\"                                                                                                                                                                \n[51] \"Educational attainment (MTAG)\"                                                                                                                                             \n[52] \"Body fat distribution (trunk fat ratio)\"                                                                                                                                   \n[53] \"Circulating myeloperoxidase levels (plasma)\"                                                                                                                               \n[54] \"Urinary albumin excretion\"                                                                                                                                                 \n[55] \"LDL cholesterol\"                                                                                                                                                           \n[56] \"Monocyte count\"                                                                                                                                                            \n[57] \"Childhood ear infection\"                                                                                                                                                   \n[58] \"Major depressive disorder\"                                                                                                                                                 \n[59] \"High IL-1beta levels in gingival crevicular fluid\"                                                                                                                         \n[60] \"Waist-to-hip ratio adjusted for BMI (additive genetic model)\"                                                                                                              \n[61] \"Reticulocyte fraction of red cells\"                                                                                                                                        \n[62] \"Circulating myeloperoxidase levels (serum)\"                                                                                                                                \n[63] \"High light scatter reticulocyte count\"                                                                                                                                     \n[64] \"Myopia (pathological)\"                                                                                                                                                     \n[65] \"Pancreatic cancer\"                                                                                                                                                         \n[66] \"Tonsillectomy\"                                                                                                                                                             \n[67] \"Plantar warts\"                                                                                                                                                             \n[68] \"IgG galactosylation phenotypes (multivariate analysis)\"                                                                                                                    \n[69] \"Chronic hepatitis B infection\"                                                                                                                                             \n[70] \"Morning vs. evening chronotype\"                                                                                                                                            \n[71] \"Coronary heart disease\"                                                                                                                                                    \n[72] \"Facial morphology (factor 12, vertical position of sublabial sulcus relative to central midface)\"                                                                          \n[73] \"Lung function (FEV1/FVC)\"                                                                                                                                                  \n[74] \"Glycine levels\"                                                                                                                                                            \n[75] \"Monocyte percentage of white cells\"                                                                                                                                        \n[76] \"Intraocular pressure\"                                                                                                                                                      \n```\n\n\n:::\n:::\n\n\nAs you can see, no problems were found, and the column now contains more values.\n\nEven if there are no warnings now, it's always a good practice to perform a few quick checks to inspect your data. You don't want to encounter issues later due to unnoticed problems in the initial step. Some example commands you can use include `dim()`, `head()`, `spec()` and `names()`. ",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}